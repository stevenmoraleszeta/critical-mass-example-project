// ============================================================================
// Loader Component Styles
// Following Critical Mass requirements: BEM, Mobile-First, Accessibility
// Following project-idea.md: Loader component specifications
// ============================================================================

// Import base files for variables and mixins
@use '../base/variables' as *;
@use '../base/mixins' as *;

// ============================================================================
// Loader Block (BEM)
// Base styles for all loaders
// ============================================================================

.loader {
  // Base loader styles
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-md);
  
  // ============================================================================
  // Loader Elements (BEM)
  // ============================================================================
  
  // Spinner container
  &__spinner {
    position: relative;
    display: inline-block;
  }
  
  // Spinner circle (the rotating part)
  &__spinner-circle {
    display: block;
    border: 3px solid var(--color-primary); // Blue border (default)
    border-right-color: transparent;
    border-top-color: transparent;
    border-radius: 50%;
    animation: loader-spin 0.8s linear infinite, loader-color-change 2s ease-in-out infinite;
  }
  
  // Loading text
  &__text {
    margin: 0;
    font-size: var(--fs-base);
    font-weight: var(--fw-normal);
    color: var(--color-primary); // Blue text
    text-align: center;
    line-height: var(--lh-normal);
  }
  
  // ============================================================================
  // Loader Sizes (BEM Modifiers)
  // Following project-idea.md: sm, md, lg sizes
  // Mobile-first: base styles for mobile, enhance for larger screens
  // ============================================================================
  
  // Small Size
  &--sm {
    gap: var(--space-sm);
    
    .loader__spinner-circle {
      width: 1.5rem; // 24px
      height: 1.5rem; // 24px
      border-width: 2px;
    }
    
    .loader__text {
      font-size: var(--fs-sm);
    }
    
    @include breakpoint-md {
      .loader__spinner-circle {
        width: 1.75rem; // 28px
        height: 1.75rem; // 28px
      }
    }
  }
  
  // Medium Size (default)
  &--md {
    gap: var(--space-md);
    
    .loader__spinner-circle {
      width: 2rem; // 32px
      height: 2rem; // 32px
      border-width: 3px;
    }
    
    .loader__text {
      font-size: var(--fs-base);
    }
    
    @include breakpoint-md {
      gap: var(--space-lg);
      
      .loader__spinner-circle {
        width: 2.5rem; // 40px
        height: 2.5rem; // 40px
        border-width: 4px;
      }
    }
  }
  
  // Large Size
  &--lg {
    gap: var(--space-lg);
    
    .loader__spinner-circle {
      width: 3rem; // 48px
      height: 3rem; // 48px
      border-width: 4px;
    }
    
    .loader__text {
      font-size: var(--fs-lg);
    }
    
    @include breakpoint-md {
      gap: var(--space-xl);
      
      .loader__spinner-circle {
        width: 4rem; // 64px
        height: 4rem; // 64px
        border-width: 5px;
      }
      
      .loader__text {
        font-size: var(--fs-xl);
      }
    }
  }
  
  // ============================================================================
  // Animations
  // ============================================================================
  
  @keyframes loader-spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  // Color change animation - cycles through primary colors smoothly
  // Using more keyframes for smoother transitions
  @keyframes loader-color-change {
    0% {
      border-color: var(--color-primary); // Blue
      border-right-color: transparent;
      border-top-color: transparent;
    }
    25% {
      border-color: var(--color-secondary); // Transition to Red
      border-right-color: transparent;
      border-top-color: transparent;
    }
    50% {
      border-color: var(--color-secondary); // Red
      border-right-color: transparent;
      border-top-color: transparent;
    }
    75% {
      border-color: var(--color-accent); // Transition to Yellow
      border-right-color: transparent;
      border-top-color: transparent;
    }
    100% {
      border-color: var(--color-primary); // Back to Blue
      border-right-color: transparent;
      border-top-color: transparent;
    }
  }
  
  // ============================================================================
  // Responsive Enhancements (Mobile-First)
  // Following Critical Mass requirement: Mobile-First approach
  // ============================================================================
  
  // Base styles are mobile-first (defined above)
  // Additional responsive adjustments can be added here if needed
  
  // ============================================================================
  // Reduced Motion Support (Accessibility)
  // Following Critical Mass accessibility requirements
  // ============================================================================
  
  @media (prefers-reduced-motion: reduce) {
    &__spinner-circle {
      animation: none;
      border-color: var(--color-primary); // Static blue color when reduced motion
      border-right-color: transparent;
      border-top-color: transparent;
      
      // Show a static indicator instead of animation
      &::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 4px;
        height: 4px;
        background-color: var(--color-primary);
        border-radius: 50%;
      }
    }
  }
}

