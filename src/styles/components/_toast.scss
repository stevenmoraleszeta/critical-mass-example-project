// ============================================================================
// Toast Component Styles
// Following Critical Mass requirements: BEM, Mobile-First, Accessibility
// Following PROJECT-IDEA.md: Toast component specifications
// ============================================================================

// Import base files for variables and mixins
@use '../base/variables' as *;
@use '../base/mixins' as *;

// ============================================================================
// Toast Block (BEM)
// Base styles for all toasts
// ============================================================================

.toast {
  // Base toast styles
  position: fixed;
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-md);
  background-color: var(--color-white);
  border: var(--border-width-thin) solid var(--color-primary); // Blue border (default)
  border-radius: var(--radius-md);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  min-width: 300px;
  max-width: 400px;
  
  // Typography - inherits monospace from body
  font-size: var(--fs-base);
  font-weight: var(--fw-normal);
  line-height: var(--lh-normal);
  color: var(--color-primary); // Blue text
  
  // Animation for entrance
  animation: toast-enter 0.3s ease-out forwards;
  
  // ============================================================================
  // Toast Elements (BEM)
  // ============================================================================
  
  // Content container
  &__content {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    flex: 1;
    min-width: 0; // Allow text to shrink
  }
  
  // Icon
  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 1.25rem; // 20px
    height: 1.25rem; // 20px
    margin-top: 0.125rem; // Align with text baseline
    
    svg {
      width: 100%;
      height: 100%;
    }
  }
  
  // Message text
  &__message {
    margin: 0;
    font-size: inherit;
    font-weight: var(--fw-normal);
    color: var(--color-primary); // Blue text
    line-height: var(--lh-normal);
    flex: 1;
  }
  
  // Close button
  &__close {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 1.5rem; // 24px
    height: 1.5rem; // 24px
    padding: 0;
    margin: 0;
    border: none;
    background: transparent;
    color: var(--color-primary); // Blue color
    cursor: pointer;
    border-radius: var(--radius-sm);
    @include transition-base(all);
    
    svg {
      width: 100%;
      height: 100%;
    }
    
    &:hover {
      background-color: rgba(0, 0, 255, 0.1); // Light blue background on hover
      color: var(--color-primary);
    }
    
    // Always red focus for better visibility (matching navbar)
    &:focus-visible {
      outline: 3px solid var(--color-secondary); // Red outline - matching navbar
      outline-offset: 4px;
    }
    
    &:focus:not(:focus-visible) {
      outline: none;
    }
    
    &:active {
      transform: scale(0.95);
    }
  }
  
  // ============================================================================
  // Toast Variants (BEM Modifiers)
  // ============================================================================
  
  // Success variant - Green would be ideal, but we use yellow with blue border
  &--success {
    border-color: var(--color-accent); // Yellow border
    background-color: var(--color-white);
    
    .toast__icon {
      color: var(--color-accent); // Yellow icon
    }
  }
  
  // Error variant - Red border
  &--error {
    border-color: var(--color-secondary); // Red border
    background-color: var(--color-white);
    
    .toast__icon {
      color: var(--color-secondary); // Red icon
    }
  }
  
  // Info variant - Blue border (default)
  &--info {
    border-color: var(--color-primary); // Blue border
    background-color: var(--color-white);
    
    .toast__icon {
      color: var(--color-primary); // Blue icon
    }
  }
  
  // Warning variant - Yellow border
  &--warning {
    border-color: var(--color-accent); // Yellow border
    background-color: var(--color-white);
    
    .toast__icon {
      color: var(--color-accent); // Yellow icon
    }
  }
  
  // ============================================================================
  // Toast Sizes (BEM Modifiers)
  // Following PROJECT-IDEA.md: sm, md, lg sizes
  // Mobile-first: base styles for mobile, enhance for larger screens
  // ============================================================================
  
  // Small Size
  &--sm {
    padding: var(--space-sm);
    min-width: 250px;
    max-width: 300px;
    font-size: var(--fs-sm);
    
    .toast__icon {
      width: 1rem; // 16px
      height: 1rem; // 16px
    }
    
    .toast__close {
      width: 1.25rem; // 20px
      height: 1.25rem; // 20px
    }
    
    @include breakpoint-md {
      min-width: 280px;
      max-width: 350px;
    }
  }
  
  // Medium Size (default)
  &--md {
    padding: var(--space-md);
    min-width: 300px;
    max-width: 400px;
    font-size: var(--fs-base);
    
    .toast__icon {
      width: 1.25rem; // 20px
      height: 1.25rem; // 20px
    }
    
    .toast__close {
      width: 1.5rem; // 24px
      height: 1.5rem; // 24px
    }
    
    @include breakpoint-md {
      min-width: 350px;
      max-width: 450px;
    }
  }
  
  // Large Size
  &--lg {
    padding: var(--space-lg);
    min-width: 350px;
    max-width: 500px;
    font-size: var(--fs-lg);
    
    .toast__icon {
      width: 1.5rem; // 24px
      height: 1.5rem; // 24px
    }
    
    .toast__close {
      width: 1.75rem; // 28px
      height: 1.75rem; // 28px
    }
    
    @include breakpoint-md {
      min-width: 400px;
      max-width: 550px;
    }
  }
  
  // ============================================================================
  // Toast Positions (BEM Modifiers)
  // ============================================================================
  
  // Top Right
  &--top-right {
    top: var(--space-md);
    right: var(--space-md);
    
    @include breakpoint-md {
      top: var(--space-lg);
      right: var(--space-lg);
    }
  }
  
  // Top Left
  &--top-left {
    top: var(--space-md);
    left: var(--space-md);
    
    @include breakpoint-md {
      top: var(--space-lg);
      left: var(--space-lg);
    }
  }
  
  // Bottom Right
  &--bottom-right {
    bottom: var(--space-md);
    right: var(--space-md);
    
    @include breakpoint-md {
      bottom: var(--space-lg);
      right: var(--space-lg);
    }
  }
  
  // Bottom Left
  &--bottom-left {
    bottom: var(--space-md);
    left: var(--space-md);
    
    @include breakpoint-md {
      bottom: var(--space-lg);
      left: var(--space-lg);
    }
  }
  
  // ============================================================================
  // Toast Exit Animation (BEM Modifier)
  // ============================================================================
  
  &--exiting {
    animation: toast-exit 0.3s ease-in forwards;
  }
  
  // ============================================================================
  // Animations
  // ============================================================================
  
  // Entrance animation
  @keyframes toast-enter {
    from {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  // Exit animation
  @keyframes toast-exit {
    from {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    to {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
    }
  }
  
  // ============================================================================
  // Responsive Enhancements (Mobile-First)
  // Following Critical Mass requirement: Mobile-First approach
  // ============================================================================
  
  @media (max-width: 640px) {
    // On mobile, toasts take full width minus margins
    min-width: calc(100vw - 2rem);
    max-width: calc(100vw - 2rem);
    
    // Adjust positions for mobile
    &--top-right,
    &--top-left {
      top: var(--space-sm);
      left: var(--space-sm);
      right: var(--space-sm);
    }
    
    &--bottom-right,
    &--bottom-left {
      bottom: var(--space-sm);
      left: var(--space-sm);
      right: var(--space-sm);
    }
  }
  
  // ============================================================================
  // Reduced Motion Support (Accessibility)
  // Following Critical Mass accessibility requirements
  // ============================================================================
  
  @media (prefers-reduced-motion: reduce) {
    animation: none;
    
    &--exiting {
      animation: none;
    }
  }
}

